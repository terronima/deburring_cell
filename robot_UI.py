# -*- coding: utf-8 -*-
import time

# Form implementation generated from reading ui file 'robot_ui.ui'
#
# Created by: PyQt5 UI code generator 5.15.4
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.

from threading import Thread
from PyQt5 import QtCore, QtGui, QtWidgets
from PyQt5.QtCore import QCoreApplication, QEvent
import socket
import sys

HEADER = 64
PORT = 12347
FORMAT = "utf-8"
DISCONNECT_MESSAGE = "!DISCONNECT"
SERVER = "localhost"
#SERVER = "192.168.1.10"
ADDR = (SERVER, PORT)
RESPOND = "ready_to_transfer"

client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client.connect(ADDR)


def reconnect():
    global client
    print("attempt to reconnect")
    client.close()
    client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    client.connect(ADDR)
    print("attempted...")


class Ui_MainWindow(object):
    active = True
    cycles = 0

    def setupUi(self, MainWindow):
        MainWindow.setObjectName("MainWindow")
        MainWindow.resize(896, 629)
        self.centralwidget = QtWidgets.QWidget(MainWindow)
        self.centralwidget.setObjectName("centralwidget")
        self.groupBox_5 = QtWidgets.QGroupBox(self.centralwidget)
        self.groupBox_5.setGeometry(QtCore.QRect(570, 10, 311, 561))
        self.groupBox_5.setTitle("")
        self.groupBox_5.setFlat(True)
        self.groupBox_5.setObjectName("groupBox_5")
        self.label_5 = QtWidgets.QLabel(self.groupBox_5)
        self.label_5.setGeometry(QtCore.QRect(40, 10, 231, 41))
        font = QtGui.QFont()
        font.setPointSize(24)
        self.label_5.setFont(font)
        self.label_5.setObjectName("label_5")
        self.listWidget = QtWidgets.QListWidget(self.groupBox_5)
        self.listWidget.setGeometry(QtCore.QRect(30, 60, 256, 491))
        self.listWidget.setObjectName("listWidget")
        self.groupBox_7 = QtWidgets.QGroupBox(self.centralwidget)
        self.groupBox_7.setGeometry(QtCore.QRect(0, 10, 271, 561))
        self.groupBox_7.setTitle("")
        self.groupBox_7.setFlat(True)
        self.groupBox_7.setObjectName("groupBox_7")
        self.label_12 = QtWidgets.QLabel(self.groupBox_7)
        self.label_12.setGeometry(QtCore.QRect(40, 100, 181, 61))
        font = QtGui.QFont()
        font.setPointSize(16)
        self.label_12.setFont(font)
        self.label_12.setAlignment(QtCore.Qt.AlignCenter)
        self.label_12.setWordWrap(True)
        self.label_12.setObjectName("label_12")
        self.label_13 = QtWidgets.QLabel(self.groupBox_7)
        self.label_13.setGeometry(QtCore.QRect(20, 200, 71, 21))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.label_13.setFont(font)
        self.label_13.setObjectName("label_13")
        self.label_14 = QtWidgets.QLabel(self.groupBox_7)
        self.label_14.setGeometry(QtCore.QRect(170, 200, 71, 21))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.label_14.setFont(font)
        self.label_14.setObjectName("label_14")
        self.groupBox_3 = QtWidgets.QGroupBox(self.groupBox_7)
        self.groupBox_3.setGeometry(QtCore.QRect(40, 10, 181, 80))
        self.groupBox_3.setTitle("")
        self.groupBox_3.setObjectName("groupBox_3")
        self.SR_Act_Stat = QtWidgets.QLabel(self.groupBox_3)
        self.SR_Act_Stat.setGeometry(QtCore.QRect(20, 50, 30, 16))
        font = QtGui.QFont()
        font.setPointSize(10)
        self.SR_Act_Stat.setFont(font)
        self.SR_Act_Stat.setObjectName("SR_Act_Stat")
        self.SR_Fault_Stat = QtWidgets.QLabel(self.groupBox_3)
        self.SR_Fault_Stat.setGeometry(QtCore.QRect(110, 50, 45, 16))
        font = QtGui.QFont()
        font.setPointSize(10)
        self.SR_Fault_Stat.setFont(font)
        self.SR_Fault_Stat.setObjectName("SR_Fault_Stat")
        self.SR_Pause_Stat = QtWidgets.QLabel(self.groupBox_3)
        self.SR_Pause_Stat.setGeometry(QtCore.QRect(60, 50, 43, 16))
        font = QtGui.QFont()
        font.setPointSize(10)
        self.SR_Pause_Stat.setFont(font)
        self.SR_Pause_Stat.setObjectName("SR_Pause_Stat")
        self.label = QtWidgets.QLabel(self.groupBox_3)
        self.label.setGeometry(QtCore.QRect(10, 0, 161, 41))
        font = QtGui.QFont()
        font.setPointSize(24)
        self.label.setFont(font)
        self.label.setObjectName("label")
        self.groupBox = QtWidgets.QGroupBox(self.groupBox_7)
        self.groupBox.setGeometry(QtCore.QRect(10, 300, 251, 261))
        self.groupBox.setTitle("")
        self.groupBox.setFlat(True)
        self.groupBox.setObjectName("groupBox")
        self.smallRobRPart1 = QtWidgets.QCheckBox(self.groupBox)
        self.smallRobRPart1.setGeometry(QtCore.QRect(170, 40, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.smallRobRPart1.setFont(font)
        self.smallRobRPart1.setObjectName("smallRobRPart1")
        self.smallRobLPart3 = QtWidgets.QCheckBox(self.groupBox)
        self.smallRobLPart3.setGeometry(QtCore.QRect(10, 70, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.smallRobLPart3.setFont(font)
        self.smallRobLPart3.setObjectName("smallRobLPart3")
        self.smallRobLPart1 = QtWidgets.QCheckBox(self.groupBox)
        self.smallRobLPart1.setGeometry(QtCore.QRect(50, 40, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.smallRobLPart1.setFont(font)
        self.smallRobLPart1.setObjectName("smallRobLPart1")
        self.smallRobRPart0 = QtWidgets.QCheckBox(self.groupBox)
        self.smallRobRPart0.setGeometry(QtCore.QRect(130, 40, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.smallRobRPart0.setFont(font)
        self.smallRobRPart0.setObjectName("smallRobRPart0")
        self.smallRobLPart5 = QtWidgets.QCheckBox(self.groupBox)
        self.smallRobLPart5.setGeometry(QtCore.QRect(90, 70, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.smallRobLPart5.setFont(font)
        self.smallRobLPart5.setObjectName("smallRobLPart5")
        self.smallRobRPart6 = QtWidgets.QCheckBox(self.groupBox)
        self.smallRobRPart6.setGeometry(QtCore.QRect(130, 100, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.smallRobRPart6.setFont(font)
        self.smallRobRPart6.setObjectName("smallRobRPart6")
        self.smallRobLPart6 = QtWidgets.QCheckBox(self.groupBox)
        self.smallRobLPart6.setGeometry(QtCore.QRect(10, 100, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.smallRobLPart6.setFont(font)
        self.smallRobLPart6.setObjectName("smallRobLPart6")
        self.smallRobRPart8 = QtWidgets.QCheckBox(self.groupBox)
        self.smallRobRPart8.setGeometry(QtCore.QRect(210, 100, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.smallRobRPart8.setFont(font)
        self.smallRobRPart8.setObjectName("smallRobRPart8")
        self.smallRobRPart3 = QtWidgets.QCheckBox(self.groupBox)
        self.smallRobRPart3.setGeometry(QtCore.QRect(130, 70, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.smallRobRPart3.setFont(font)
        self.smallRobRPart3.setObjectName("smallRobRPart3")
        self.smallRobLPart2 = QtWidgets.QCheckBox(self.groupBox)
        self.smallRobLPart2.setGeometry(QtCore.QRect(90, 40, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.smallRobLPart2.setFont(font)
        self.smallRobLPart2.setObjectName("smallRobLPart2")
        self.smallRobLPart7 = QtWidgets.QCheckBox(self.groupBox)
        self.smallRobLPart7.setGeometry(QtCore.QRect(50, 100, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.smallRobLPart7.setFont(font)
        self.smallRobLPart7.setObjectName("smallRobLPart7")
        self.smallRobLPart8 = QtWidgets.QCheckBox(self.groupBox)
        self.smallRobLPart8.setGeometry(QtCore.QRect(90, 100, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.smallRobLPart8.setFont(font)
        self.smallRobLPart8.setObjectName("smallRobLPart8")
        self.smallRobRPart2 = QtWidgets.QCheckBox(self.groupBox)
        self.smallRobRPart2.setGeometry(QtCore.QRect(210, 40, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.smallRobRPart2.setFont(font)
        self.smallRobRPart2.setObjectName("smallRobRPart2")
        self.smallRobRPart7 = QtWidgets.QCheckBox(self.groupBox)
        self.smallRobRPart7.setGeometry(QtCore.QRect(170, 100, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.smallRobRPart7.setFont(font)
        self.smallRobRPart7.setObjectName("smallRobRPart7")
        self.smallRobLPart0 = QtWidgets.QCheckBox(self.groupBox)
        self.smallRobLPart0.setGeometry(QtCore.QRect(10, 40, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.smallRobLPart0.setFont(font)
        self.smallRobLPart0.setObjectName("smallRobLPart0")
        self.smallRobRPart4 = QtWidgets.QCheckBox(self.groupBox)
        self.smallRobRPart4.setGeometry(QtCore.QRect(170, 70, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.smallRobRPart4.setFont(font)
        self.smallRobRPart4.setObjectName("smallRobRPart4")
        self.PB_Reset_SR_Wheel = QtWidgets.QPushButton(self.groupBox)
        self.PB_Reset_SR_Wheel.setGeometry(QtCore.QRect(10, 200, 221, 51))
        font = QtGui.QFont()
        font.setPointSize(24)
        self.PB_Reset_SR_Wheel.setFont(font)
        self.PB_Reset_SR_Wheel.setObjectName("PB_Reset_SR_Wheel")
        self.label_4 = QtWidgets.QLabel(self.groupBox)
        self.label_4.setGeometry(QtCore.QRect(20, 0, 211, 41))
        font = QtGui.QFont()
        font.setPointSize(24)
        self.label_4.setFont(font)
        self.label_4.setObjectName("label_4")
        self.smallRobLPart4 = QtWidgets.QCheckBox(self.groupBox)
        self.smallRobLPart4.setGeometry(QtCore.QRect(50, 70, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.smallRobLPart4.setFont(font)
        self.smallRobLPart4.setObjectName("smallRobLPart4")
        self.smallRobRPart5 = QtWidgets.QCheckBox(self.groupBox)
        self.smallRobRPart5.setGeometry(QtCore.QRect(210, 70, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.smallRobRPart5.setFont(font)
        self.smallRobRPart5.setObjectName("smallRobRPart5")
        self.PrB_grWheelSR = QtWidgets.QProgressBar(self.groupBox_7)
        self.PrB_grWheelSR.setGeometry(QtCore.QRect(10, 220, 231, 23))
        self.PrB_grWheelSR.setMinimum(0)
        self.PrB_grWheelSR.setMaximum(100)
        self.PrB_grWheelSR.setProperty("value", 100)
        self.PrB_grWheelSR.setAlignment(QtCore.Qt.AlignCenter)
        self.PrB_grWheelSR.setTextVisible(True)
        self.PrB_grWheelSR.setOrientation(QtCore.Qt.Horizontal)
        self.PrB_grWheelSR.setInvertedAppearance(True)
        self.PrB_grWheelSR.setObjectName("PrB_grWheelSR")
        self.groupBox.raise_()
        self.groupBox_3.raise_()
        self.label_12.raise_()
        self.label_13.raise_()
        self.label_14.raise_()
        self.PrB_grWheelSR.raise_()
        self.groupBox_8 = QtWidgets.QGroupBox(self.centralwidget)
        self.groupBox_8.setGeometry(QtCore.QRect(280, 10, 271, 561))
        self.groupBox_8.setTitle("")
        self.groupBox_8.setFlat(True)
        self.groupBox_8.setObjectName("groupBox_8")
        self.label_15 = QtWidgets.QLabel(self.groupBox_8)
        self.label_15.setGeometry(QtCore.QRect(40, 100, 181, 61))
        font = QtGui.QFont()
        font.setPointSize(16)
        self.label_15.setFont(font)
        self.label_15.setAlignment(QtCore.Qt.AlignCenter)
        self.label_15.setWordWrap(True)
        self.label_15.setObjectName("label_15")
        self.label_16 = QtWidgets.QLabel(self.groupBox_8)
        self.label_16.setGeometry(QtCore.QRect(10, 180, 71, 21))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.label_16.setFont(font)
        self.label_16.setObjectName("label_16")
        self.label_17 = QtWidgets.QLabel(self.groupBox_8)
        self.label_17.setGeometry(QtCore.QRect(170, 180, 71, 21))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.label_17.setFont(font)
        self.label_17.setObjectName("label_17")
        self.groupBox_4 = QtWidgets.QGroupBox(self.groupBox_8)
        self.groupBox_4.setGeometry(QtCore.QRect(40, 10, 181, 80))
        self.groupBox_4.setTitle("")
        self.groupBox_4.setObjectName("groupBox_4")
        self.LR_Active_Stat = QtWidgets.QLabel(self.groupBox_4)
        self.LR_Active_Stat.setGeometry(QtCore.QRect(20, 50, 30, 16))
        font = QtGui.QFont()
        font.setPointSize(10)
        self.LR_Active_Stat.setFont(font)
        self.LR_Active_Stat.setObjectName("LR_Active_Stat")
        self.LR_Fault_Stat = QtWidgets.QLabel(self.groupBox_4)
        self.LR_Fault_Stat.setGeometry(QtCore.QRect(110, 50, 47, 16))
        font = QtGui.QFont()
        font.setPointSize(10)
        self.LR_Fault_Stat.setFont(font)
        self.LR_Fault_Stat.setObjectName("LR_Fault_Stat")
        self.LR_Pause_Stat = QtWidgets.QLabel(self.groupBox_4)
        self.LR_Pause_Stat.setGeometry(QtCore.QRect(60, 50, 40, 16))
        font = QtGui.QFont()
        font.setPointSize(10)
        self.LR_Pause_Stat.setFont(font)
        self.LR_Pause_Stat.setObjectName("LR_Pause_Stat")
        self.label_2 = QtWidgets.QLabel(self.groupBox_4)
        self.label_2.setGeometry(QtCore.QRect(10, 0, 161, 41))
        font = QtGui.QFont()
        font.setPointSize(24)
        self.label_2.setFont(font)
        self.label_2.setObjectName("label_2")
        self.groupBox_2 = QtWidgets.QGroupBox(self.groupBox_8)
        self.groupBox_2.setGeometry(QtCore.QRect(10, 300, 251, 261))
        self.groupBox_2.setTitle("")
        self.groupBox_2.setFlat(True)
        self.groupBox_2.setObjectName("groupBox_2")
        self.largeRobRPart1 = QtWidgets.QCheckBox(self.groupBox_2)
        self.largeRobRPart1.setGeometry(QtCore.QRect(170, 40, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.largeRobRPart1.setFont(font)
        self.largeRobRPart1.setObjectName("largeRobRPart1")
        self.largeRobLPart3 = QtWidgets.QCheckBox(self.groupBox_2)
        self.largeRobLPart3.setGeometry(QtCore.QRect(10, 70, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.largeRobLPart3.setFont(font)
        self.largeRobLPart3.setObjectName("largeRobLPart3")
        self.largeRobLPart1 = QtWidgets.QCheckBox(self.groupBox_2)
        self.largeRobLPart1.setGeometry(QtCore.QRect(50, 40, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.largeRobLPart1.setFont(font)
        self.largeRobLPart1.setObjectName("largeRobLPart1")
        self.largeRobRPart0 = QtWidgets.QCheckBox(self.groupBox_2)
        self.largeRobRPart0.setGeometry(QtCore.QRect(130, 40, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.largeRobRPart0.setFont(font)
        self.largeRobRPart0.setObjectName("largeRobRPart0")
        self.largeRobLPart5 = QtWidgets.QCheckBox(self.groupBox_2)
        self.largeRobLPart5.setGeometry(QtCore.QRect(90, 70, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.largeRobLPart5.setFont(font)
        self.largeRobLPart5.setObjectName("largeRobLPart5")
        self.largeRobRPart6 = QtWidgets.QCheckBox(self.groupBox_2)
        self.largeRobRPart6.setGeometry(QtCore.QRect(130, 100, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.largeRobRPart6.setFont(font)
        self.largeRobRPart6.setObjectName("largeRobRPart6")
        self.largeRobLPart6 = QtWidgets.QCheckBox(self.groupBox_2)
        self.largeRobLPart6.setGeometry(QtCore.QRect(10, 100, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.largeRobLPart6.setFont(font)
        self.largeRobLPart6.setObjectName("largeRobLPart6")
        self.largeRobRPart8 = QtWidgets.QCheckBox(self.groupBox_2)
        self.largeRobRPart8.setGeometry(QtCore.QRect(210, 100, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.largeRobRPart8.setFont(font)
        self.largeRobRPart8.setObjectName("largeRobRPart8")
        self.largeRobRPart3 = QtWidgets.QCheckBox(self.groupBox_2)
        self.largeRobRPart3.setGeometry(QtCore.QRect(130, 70, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.largeRobRPart3.setFont(font)
        self.largeRobRPart3.setObjectName("largeRobRPart3")
        self.largeRobLPart2 = QtWidgets.QCheckBox(self.groupBox_2)
        self.largeRobLPart2.setGeometry(QtCore.QRect(90, 40, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.largeRobLPart2.setFont(font)
        self.largeRobLPart2.setObjectName("largeRobLPart2")
        self.largeRobLPart7 = QtWidgets.QCheckBox(self.groupBox_2)
        self.largeRobLPart7.setGeometry(QtCore.QRect(50, 100, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.largeRobLPart7.setFont(font)
        self.largeRobLPart7.setObjectName("largeRobLPart7")
        self.largeRobLPart8 = QtWidgets.QCheckBox(self.groupBox_2)
        self.largeRobLPart8.setGeometry(QtCore.QRect(90, 100, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.largeRobLPart8.setFont(font)
        self.largeRobLPart8.setObjectName("largeRobLPart8")
        self.largeRobRPart2 = QtWidgets.QCheckBox(self.groupBox_2)
        self.largeRobRPart2.setGeometry(QtCore.QRect(210, 40, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.largeRobRPart2.setFont(font)
        self.largeRobRPart2.setObjectName("largeRobRPart2")
        self.largeRobRPart7 = QtWidgets.QCheckBox(self.groupBox_2)
        self.largeRobRPart7.setGeometry(QtCore.QRect(170, 100, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.largeRobRPart7.setFont(font)
        self.largeRobRPart7.setObjectName("largeRobRPart7")
        self.largeRobLPart0 = QtWidgets.QCheckBox(self.groupBox_2)
        self.largeRobLPart0.setGeometry(QtCore.QRect(10, 40, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.largeRobLPart0.setFont(font)
        self.largeRobLPart0.setObjectName("largeRobLPart0")
        self.largeRobRPart4 = QtWidgets.QCheckBox(self.groupBox_2)
        self.largeRobRPart4.setGeometry(QtCore.QRect(170, 70, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.largeRobRPart4.setFont(font)
        self.largeRobRPart4.setObjectName("largeRobRPart4")
        self.PB_Reset_LR_Wheel = QtWidgets.QPushButton(self.groupBox_2)
        self.PB_Reset_LR_Wheel.setGeometry(QtCore.QRect(10, 200, 221, 51))
        font = QtGui.QFont()
        font.setPointSize(24)
        self.PB_Reset_LR_Wheel.setFont(font)
        self.PB_Reset_LR_Wheel.setDefault(False)
        self.PB_Reset_LR_Wheel.setFlat(False)
        self.PB_Reset_LR_Wheel.setObjectName("PB_Reset_LR_Wheel")
        self.label_18 = QtWidgets.QLabel(self.groupBox_2)
        self.label_18.setGeometry(QtCore.QRect(20, 0, 211, 41))
        font = QtGui.QFont()
        font.setPointSize(24)
        self.label_18.setFont(font)
        self.label_18.setObjectName("label_18")
        self.largeRobLPart4 = QtWidgets.QCheckBox(self.groupBox_2)
        self.largeRobLPart4.setGeometry(QtCore.QRect(50, 70, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.largeRobLPart4.setFont(font)
        self.largeRobLPart4.setObjectName("largeRobLPart4")
        self.largeRobRPart5 = QtWidgets.QCheckBox(self.groupBox_2)
        self.largeRobRPart5.setGeometry(QtCore.QRect(210, 70, 31, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        self.largeRobRPart5.setFont(font)
        self.largeRobRPart5.setObjectName("largeRobRPart5")
        self.PrB_grWheel1LR = QtWidgets.QProgressBar(self.groupBox_8)
        self.PrB_grWheel1LR.setGeometry(QtCore.QRect(10, 200, 231, 23))
        self.PrB_grWheel1LR.setMinimum(0)
        self.PrB_grWheel1LR.setMaximum(100)
        self.PrB_grWheel1LR.setProperty("value", 100)
        self.PrB_grWheel1LR.setAlignment(QtCore.Qt.AlignCenter)
        self.PrB_grWheel1LR.setTextVisible(True)
        self.PrB_grWheel1LR.setOrientation(QtCore.Qt.Horizontal)
        self.PrB_grWheel1LR.setInvertedAppearance(True)
        self.PrB_grWheel1LR.setObjectName("PrB_grWheel1LR")
        self.PrB_grWheel2LR = QtWidgets.QProgressBar(self.groupBox_8)
        self.PrB_grWheel2LR.setGeometry(QtCore.QRect(10, 270, 231, 23))
        self.PrB_grWheel2LR.setMinimum(0)
        self.PrB_grWheel2LR.setMaximum(100)
        self.PrB_grWheel2LR.setProperty("value", 100)
        self.PrB_grWheel2LR.setAlignment(QtCore.Qt.AlignCenter)
        self.PrB_grWheel2LR.setTextVisible(True)
        self.PrB_grWheel2LR.setOrientation(QtCore.Qt.Horizontal)
        self.PrB_grWheel2LR.setInvertedAppearance(True)
        self.PrB_grWheel2LR.setObjectName("PrB_grWheel2LR")
        self.label_19 = QtWidgets.QLabel(self.groupBox_8)
        self.label_19.setGeometry(QtCore.QRect(10, 250, 71, 21))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.label_19.setFont(font)
        self.label_19.setObjectName("label_19")
        self.label_20 = QtWidgets.QLabel(self.groupBox_8)
        self.label_20.setGeometry(QtCore.QRect(170, 250, 71, 21))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.label_20.setFont(font)
        self.label_20.setObjectName("label_20")
        self.PB_Trig_Cam = QtWidgets.QPushButton(self.centralwidget)
        self.PB_Trig_Cam.setGeometry(QtCore.QRect(140, 450, 271, 51))
        font = QtGui.QFont()
        font.setPointSize(24)
        self.PB_Trig_Cam.setFont(font)
        self.PB_Trig_Cam.setObjectName("PB_Trig_Cam")
        MainWindow.setCentralWidget(self.centralwidget)
        self.menubar = QtWidgets.QMenuBar(MainWindow)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 896, 21))
        self.menubar.setObjectName("menubar")
        self.menuFile = QtWidgets.QMenu(self.menubar)
        self.menuFile.setObjectName("menuFile")
        MainWindow.setMenuBar(self.menubar)
        self.statusbar = QtWidgets.QStatusBar(MainWindow)
        self.statusbar.setObjectName("statusbar")
        MainWindow.setStatusBar(self.statusbar)
        self.menubar.addAction(self.menuFile.menuAction())

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

        self.check_box_sr_list = [self.smallRobLPart0, self.smallRobLPart1, self.smallRobLPart2, self.smallRobLPart3,
                                  self.smallRobLPart4, self.smallRobLPart5, self.smallRobLPart6, self.smallRobLPart7,
                                  self.smallRobLPart8, self.smallRobRPart0, self.smallRobRPart1, self.smallRobRPart2,
                                  self.smallRobRPart3, self.smallRobRPart4, self.smallRobRPart5, self.smallRobRPart6,
                                  self.smallRobRPart7, self.smallRobRPart8]
        self.check_box_lr_list = [self.largeRobLPart0, self.largeRobLPart1, self.largeRobLPart2, self.largeRobLPart3,
                                  self.largeRobLPart4, self.largeRobLPart5, self.largeRobLPart6, self.largeRobLPart7,
                                  self.largeRobLPart8, self.largeRobRPart0, self.largeRobRPart1, self.largeRobRPart2,
                                  self.largeRobRPart3, self.largeRobRPart4, self.largeRobRPart5, self.largeRobRPart6,
                                  self.largeRobRPart7, self.largeRobRPart8]

        self.PB_Trig_Cam.clicked.connect(self.camera_trig_button)
        self.PB_Reset_SR_Wheel.clicked.connect(self.reset_grind_wheel_s)
        self.PB_Reset_LR_Wheel.clicked.connect(self.reset_grind_wheel_l)

    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "MainWindow"))
        self.label_5.setText(_translate("MainWindow", "Production data"))
        self.label_12.setText(_translate("MainWindow", "Grinding wheel deterioration status"))
        self.label_13.setText(_translate("MainWindow", "GOOD"))
        self.label_14.setText(_translate("MainWindow", "REPLACE"))
        self.SR_Act_Stat.setText(_translate("MainWindow", "Active"))
        self.SR_Fault_Stat.setText(_translate("MainWindow", "Faulted"))
        self.SR_Pause_Stat.setText(_translate("MainWindow", "Paused"))
        self.label.setText(_translate("MainWindow", "Small robot"))
        self.smallRobRPart1.setText(_translate("MainWindow", "2"))
        self.smallRobLPart3.setText(_translate("MainWindow", "4"))
        self.smallRobLPart1.setText(_translate("MainWindow", "2"))
        self.smallRobRPart0.setText(_translate("MainWindow", "1"))
        self.smallRobLPart5.setText(_translate("MainWindow", "6"))
        self.smallRobRPart6.setText(_translate("MainWindow", "7"))
        self.smallRobLPart6.setText(_translate("MainWindow", "7"))
        self.smallRobRPart8.setText(_translate("MainWindow", "9"))
        self.smallRobRPart3.setText(_translate("MainWindow", "4"))
        self.smallRobLPart2.setText(_translate("MainWindow", "3"))
        self.smallRobLPart7.setText(_translate("MainWindow", "8"))
        self.smallRobLPart8.setText(_translate("MainWindow", "9"))
        self.smallRobRPart2.setText(_translate("MainWindow", "3"))
        self.smallRobRPart7.setText(_translate("MainWindow", "8"))
        self.smallRobLPart0.setText(_translate("MainWindow", "1"))
        self.smallRobRPart4.setText(_translate("MainWindow", "5"))
        self.PB_Reset_SR_Wheel.setText(_translate("MainWindow", "Reset wheel"))
        self.label_4.setText(_translate("MainWindow", "Parts presence"))
        self.smallRobLPart4.setText(_translate("MainWindow", "5"))
        self.smallRobRPart5.setText(_translate("MainWindow", "6"))
        self.label_15.setText(_translate("MainWindow", "Grinding wheel deterioration status"))
        self.label_16.setText(_translate("MainWindow", "GOOD"))
        self.label_17.setText(_translate("MainWindow", "REPLACE"))
        self.LR_Active_Stat.setText(_translate("MainWindow", "Active"))
        self.LR_Fault_Stat.setText(_translate("MainWindow", "Faulted"))
        self.LR_Pause_Stat.setText(_translate("MainWindow", "Paused"))
        self.label_2.setText(_translate("MainWindow", "Large robot"))
        self.largeRobRPart1.setText(_translate("MainWindow", "2"))
        self.largeRobLPart3.setText(_translate("MainWindow", "4"))
        self.largeRobLPart1.setText(_translate("MainWindow", "2"))
        self.largeRobRPart0.setText(_translate("MainWindow", "1"))
        self.largeRobLPart5.setText(_translate("MainWindow", "6"))
        self.largeRobRPart6.setText(_translate("MainWindow", "7"))
        self.largeRobLPart6.setText(_translate("MainWindow", "7"))
        self.largeRobRPart8.setText(_translate("MainWindow", "9"))
        self.largeRobRPart3.setText(_translate("MainWindow", "4"))
        self.largeRobLPart2.setText(_translate("MainWindow", "3"))
        self.largeRobLPart7.setText(_translate("MainWindow", "8"))
        self.largeRobLPart8.setText(_translate("MainWindow", "9"))
        self.largeRobRPart2.setText(_translate("MainWindow", "3"))
        self.largeRobRPart7.setText(_translate("MainWindow", "8"))
        self.largeRobLPart0.setText(_translate("MainWindow", "1"))
        self.largeRobRPart4.setText(_translate("MainWindow", "5"))
        self.PB_Reset_LR_Wheel.setText(_translate("MainWindow", "Reset wheel"))
        self.label_18.setText(_translate("MainWindow", "Parts presence"))
        self.largeRobLPart4.setText(_translate("MainWindow", "5"))
        self.largeRobRPart5.setText(_translate("MainWindow", "6"))
        self.label_19.setText(_translate("MainWindow", "GOOD"))
        self.label_20.setText(_translate("MainWindow", "REPLACE"))
        self.PB_Trig_Cam.setText(_translate("MainWindow", "Trigger camera"))
        self.menuFile.setTitle(_translate("MainWindow", "File"))

    def encode(self, enc_msg):
        message = enc_msg.encode(FORMAT)
        msg_length = len(message)
        send_length = str(msg_length).encode(FORMAT)
        send_length += b' ' * (HEADER - len(send_length))
        # print(f"Encoded: {message}")
        message_return = (send_length, message)
        return message_return

    def send(self, msg):
        while True:
            message_enc = self.encode(msg)
            try:
                client.send(message_enc[0])
                client.send(message_enc[1])
                break
            except:
                print(f"Exception captured")
                reconnect()

    def camera_trig_button(self):
        self.send("HMI,cam,send_cam_data_HMI")

    def status_updates(self):
        recv = ""
        while True:
            QCoreApplication.processEvents()
            try:
                recv = client.recv(64).decode("utf-8")
                if recv != "ping":
                    print(f"received: {recv}")
            except:
                reconnect()
            if len(recv) == 36:
                self.trig_camera(recv)
            if len(recv) == 5:
                data = int(recv)
                self.display_wheel_stat(r_cycle_cnt=data, l_cycle_cnt=data)
                print(data)
            if recv == "name":
                data = "HMI"
                self.send(f"{data}")
                print(f"Sent: {data}")
            if recv == "r1_active":
                self.SR_Act_Stat.setStyleSheet("background-color: green")
                self.SR_Pause_Stat.setStyleSheet("background-color: none")
                self.SR_Fault_Stat.setStyleSheet("background-color: none")
            elif recv == "r1_paused":
                self.SR_Act_Stat.setStyleSheet("background-color: none")
                self.SR_Pause_Stat.setStyleSheet("background-color: yellow")
                self.SR_Fault_Stat.setStyleSheet("background-color: none")
            elif recv == "r1_faulted":
                self.SR_Act_Stat.setStyleSheet("background-color: none")
                self.SR_Pause_Stat.setStyleSheet("background-color: none")
                self.SR_Fault_Stat.setStyleSheet("background-color: red")
            if recv == "r2_active":
                self.LR_Active_Stat.setStyleSheet("background-color: green")
                self.LR_Pause_Stat.setStyleSheet("background-color: none")
                self.LR_Fault_Stat.setStyleSheet("background-color: none")
            elif recv == "r2_paused":
                self.LR_Active_Stat.setStyleSheet("background-color: none")
                self.LR_Pause_Stat.setStyleSheet("background-color: yellow")
                self.LR_Fault_Stat.setStyleSheet("background-color: none")
            elif recv == "r2_faulted":
                self.LR_Active_Stat.setStyleSheet("background-color: none")
                self.LR_Pause_Stat.setStyleSheet("background-color: none")
                self.LR_Fault_Stat.setStyleSheet("background-color: red")

    def trig_camera(self, cam_data):
        ctr1 = 0
        ctr2 = 0
        camera_data_list_sr = cam_data[0:18]
        camera_data_list_lr = cam_data[18::]
        print(f"small data: {camera_data_list_sr}, large data: {camera_data_list_lr}")
        for i in camera_data_list_sr:
            d = int(i)
            if d == 1:
                self.check_box_sr_list[ctr1].setChecked(True)
            ctr1 += 1
        for i in camera_data_list_lr:
            d = int(i)
            if d == 1:
                self.check_box_lr_list[ctr2].setChecked(True)
            ctr2 += 1
        self.camera_triggered = False

    def return_detected_parts(self):
        parts_pres = []
        for i in self.check_box_sr_list:
            if i.isChecked() == True:
                parts_pres.append(1)
            else:
                parts_pres.append(0)
        for i in self.check_box_lr_list:
            if i.isChecked() == True:
                parts_pres.append(1)
            else:
                parts_pres.append(0)
        # return parts_pres
        for i in parts_pres:
            self.listWidget.addItem(str(i))

    def display_wheel_stat(self, r_cycle_cnt, l_cycle_cnt):
        wheel_deterioration_lr = 100 - r_cycle_cnt * 0.01
        wheel_deterioration_sr = 100 - (r_cycle_cnt + l_cycle_cnt) * 0.01
        self.PrB_grWheelSR.setValue(int(wheel_deterioration_sr))
        self.PrB_grWheel1LR.setValue(int(wheel_deterioration_lr))
        self.PrB_grWheel2LR.setValue(int(wheel_deterioration_lr))

    def reset_grind_wheel_s(self):
        self.PrB_grWheelSR.setValue(100)

    def reset_grind_wheel_l(self):
        self.PrB_grWheel1LR.setValue(100)
        self.PrB_grWheel2LR.setValue(100)


#if __name__ == "__main__":
app = QtWidgets.QApplication(sys.argv)
MainWindow = QtWidgets.QMainWindow()
ui = Ui_MainWindow()
ui.setupUi(MainWindow)
MainWindow.show()
t = QtCore.QTimer()
t.singleShot(0, ui.status_updates)
# starting the app
sys.exit(app.exec_())